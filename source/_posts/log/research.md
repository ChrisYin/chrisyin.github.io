---
title: post
date: 2020-08-27 11:13:20
tags:
---

# 2020-08-27 Thrisday

I fixed the link problem by modifying the binding attribute of i64 symbol yesterday.

However, this solution brings a new problem which I will define and try to solve today.

# 2020-09-01 Tuesday

### New Label Problem

The problem I mentioned in the last post is repetition of the label generated by function "new_label".

This function generate labels through scanning the unupdated code, which means the index of label won't update either.

So if there are multiple generations of label, some labels will share the same index.

### Instruction Encoding Problem

Another problem I met recently was encoding of new instructions, including "bsrl", "bsrl", etc.

Encoding x86 instruction is complex to me, and needs more time to seek deeper.

### Function Stack Updating Problem

The newest problem I fix it today is outmoded stack after the elimination of stack related instructions in "PseudoInstrucions" pass.

In this pass, three instrucions of handling stack are being to eliminate, which will change the stack size of its function.

The problem is that it does't update the stack size accordingly in the pass.

---
title: post
date: 2020-08-27 11:13:20
tags:
---

# 2020-08-27 Thrisday

I fixed the link problem by modifying the binding attribute of i64 symbol yesterday.

However, this solution brings a new problem which I will define and try to solve today.

# 2020-09-01 Tuesday

### New Label Problem

The problem I mentioned in the last post is repetition of the label generated by function "new_label".

This function generate labels through scanning the unupdated code, which means the index of label won't update either.

So if there are multiple generations of label, some labels will share the same index.

### Instruction Encoding Problem

Another problem I met recently was encoding of new instructions, including "bsrl", "bsrl", etc.

Encoding x86 instruction is complex to me, and needs more time to seek deeper.

### Function Stack Updating Problem

The newest problem I fix it today is outmoded stack after the elimination of stack related instructions in "PseudoInstrucions" pass.

In this pass, three instrucions of handling stack are being to eliminate, which will change the stack size of its function.

The problem is that it does't update the stack size accordingly in the pass.

# 2020-09-02 Wednesday

Today I finished the first phase of establishing complete assembler of CompcertELF, which can successfully compile almost all 
testcases except some special examples, such as those with unimportant features.

## Alignment Examples

In order to align 16 byte double-type data, I change the minial alignment size from 8 bytes to 16 bytes, which will promise 
the 16-byte alignment of all global definitons.

In the meantime, any alignment under 16-byte is impossible to get, and this is the reason why the alignment example can not be
passed.

## Inline-Asm Example

Since it is a little complex to realize the inline-asm compilation(probably do it later), we omit the example.

## Floating Point Example

The reason why it is time-consuming to compile this example needs to be found in the future.

Now we just ignore the nugatory example.

I will start phase two (finish the constructure of the proofs) on Tomorrow.

# 2020-09-21 Monday

Today I begin to build the complete prove structure of CompcertELF.

My job can be divided into two parts: to finish the proofs of the new passes added by me and to modify the proofs of the old passes which has been changed.

## Step 1

Finish top level proofs in the "Compiler.v".

